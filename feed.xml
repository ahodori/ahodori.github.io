<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-06-03T09:13:58-04:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Your awesome title</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><entry><title type="html">Creating database seed data with ActiveRecord</title><link href="http://localhost:4000/2022/06/03/creating-database-seed-data-with-activerecord.html" rel="alternate" type="text/html" title="Creating database seed data with ActiveRecord" /><published>2022-06-03T03:39:01-04:00</published><updated>2022-06-03T03:39:01-04:00</updated><id>http://localhost:4000/2022/06/03/creating-database-seed-data-with-activerecord</id><content type="html" xml:base="http://localhost:4000/2022/06/03/creating-database-seed-data-with-activerecord.html"><![CDATA[<p>In order to test and debug code running on a database, we need data in that database. Seeds are a way of creating temporary or filler data we can use as a simulation of real, user-created data. But how do we create good seed data? I’ll go over a few ideas from debugging that can help inform the seed data, then the basics of how to use an external API to fill in seed data for you.</p>

<p>For these examples, I’ll use the database structure of a recent project, where we had 3 tables, Users, Locations, and Visits. Users and Locations are connected by Visits, which each have one corresponding User and Location, acting as a join table. One User and one Location may have multiple associated Visits, but each Visit has only one connected User and Location. A Visit represents a User visiting a particular Location. Here’s how the schema looks in ActiveRecord for this setup:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="n">create_table</span> <span class="s2">"locations"</span><span class="p">,</span> <span class="ss">force: :cascade</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="s2">"country"</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"created_at"</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">6</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"updated_at"</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">6</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
  <span class="k">end</span>

  <span class="n">create_table</span> <span class="s2">"users"</span><span class="p">,</span> <span class="ss">force: :cascade</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="s2">"name"</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"created_at"</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">6</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"updated_at"</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">6</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
  <span class="k">end</span>

  <span class="n">create_table</span> <span class="s2">"visits"</span><span class="p">,</span> <span class="ss">force: :cascade</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">integer</span> <span class="s2">"user_id"</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">integer</span> <span class="s2">"location_id"</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"created_at"</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">6</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
    <span class="n">t</span><span class="p">.</span><span class="nf">datetime</span> <span class="s2">"updated_at"</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">6</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span>
  <span class="k">end</span></code></pre></figure>

<p>Now that we have our database layout, we can start creating seed data. To start with, let’s make a few locations and users in our seeds.rb file:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">    <span class="n">bob</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"Bob"</span><span class="p">)</span>
    <span class="n">alice</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"Alice"</span><span class="p">)</span>
    <span class="n">joe</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"Joe"</span><span class="p">)</span>

    <span class="n">us</span> <span class="o">=</span> <span class="no">Location</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">country: </span><span class="s2">"United States"</span><span class="p">)</span>
    <span class="n">ca</span> <span class="o">=</span> <span class="no">Location</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">country: </span><span class="s2">"Canada"</span><span class="p">)</span>
    <span class="n">mx</span> <span class="o">=</span> <span class="no">Location</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">country: </span><span class="s2">"Mexico"</span><span class="p">)</span></code></pre></figure>

<p>In order to create our sample visits, let’s think about what we would want to test in some function that takes visits. For a function that takes in an array as input, it’s important to test what happens when that array has zero, one, or multiple entries: So let’s make it so that our three example users explore those three possibilities.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">    <span class="no">Visit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">user_id: </span><span class="n">alice</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span> <span class="ss">location_id: </span><span class="n">us</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span>

    <span class="no">Visit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">user_id: </span><span class="n">joe</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span> <span class="ss">location_id: </span><span class="n">us</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span>
    <span class="no">Visit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">user_id: </span><span class="n">joe</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span> <span class="ss">location_id: </span><span class="n">ca</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span>
    <span class="no">Visit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">user_id: </span><span class="n">joe</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span> <span class="ss">location_id: </span><span class="n">mx</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span></code></pre></figure>

<p>Now, by looking at the visits of each user we can get those zero, one, or multiple entry responses we were looking for. As we build out the functionality of our app’s backend, we may want more functions that operate on different data sources; maybe we will have a function that operates on users, filtered by the first initial of their name. In that case, we can create new seed data to make sure we still have options with zero, one, and multiple valid users; if we create a new user named “Billy”, we can capture that multiple-case scenario, and we can capture the zero-case scenario by just looking for users whose names begin with C.</p>

<h2 id="seeding-via-api-and-at-random">Seeding via API and at random</h2>

<p>Handwriting seeds is useful for testing the basic functionality of your app, but for something closer to a real situation, we now want a lot of data. It’s slow and difficult for us as developers to create data with the size and scope of real user data by hand; for that, we can use an API to make our work easier.</p>

<p>Let’s use the randomuser.me API to generate a whole bunch of users. In order to access this on our backend, we need to install the rest-client gem by adding the line to our project’s Gemfile:
<code class="language-plaintext highlighter-rouge">gem "rest-client", "~&gt; 2.1.0"</code></p>

<p>Then run <code class="language-plaintext highlighter-rouge">bundle install</code> to install the dependencies. Now, in the seed file, let’s write a request to this api using rest-client that will get us 100 randomly generated users:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">users</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"https://randomuser.me/api/?results=100"</span><span class="p">)</span>
<span class="n">users_array</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">users</span><span class="p">)[</span><span class="s2">"results"</span><span class="p">]</span></code></pre></figure>

<p>This API will give us a whole lot of information that’s not useful to us right now, so let’s drill down and create 100 users using just the user’s first name the API provides.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">users_array</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="no">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="n">user</span><span class="p">[</span><span class="s2">"name"</span><span class="p">][</span><span class="s2">"first"</span><span class="p">])</span>
<span class="k">end</span></code></pre></figure>

<p>Now our database has one hundred random users, and we didn’t need to come up with one hundred names ourselves!</p>

<p>I’m sure there’s a similar API that can be used to do the same for location, but for now I’d like to skip ahead to creating a lot of visits. Visits only depend on the users and locations we’ve already defined, so there’s nothing to go to an outside API for; instead, we want to create a whole bunch of visits by randomly pairing users and locations. Let’s do that:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">user_ids</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:id</span><span class="p">)</span>
<span class="n">location_ids</span> <span class="o">=</span> <span class="no">Location</span><span class="p">.</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:id</span><span class="p">)</span>

<span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">100</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span>
    <span class="n">random_user_id</span> <span class="o">=</span> <span class="n">user_ids</span><span class="p">.</span><span class="nf">sample</span>
    <span class="n">random_location_id</span> <span class="o">=</span> <span class="n">location_ids</span><span class="p">.</span><span class="nf">sample</span>

    <span class="no">Visit</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">user_id: </span><span class="n">random_user_id</span><span class="p">,</span> <span class="ss">location_id: </span><span class="n">random_location_id</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<p>First, we get two arrays containing all the valid User and Location ids. (This step can be very slow for a large database, but because we only need to seed our database once, this is acceptable.)</p>

<p>Next, 100 times, we sample a random id from each array, and create a Visit with those ids. Now we’ve got 100 randomly generated visits we can use to test our database.</p>

<p>This is just the simplest case of random generation; there’s a whole lot more you can do. For example, if we didn’t want duplicate visits, we might introduce a conditional that checks if a visit with a particular user_id and location_id already exists before we create it.</p>

<p>We might also want to avoid leaving things up to chance, and iterate through every user to make sure each user has at least one visit.</p>

<p>Keep in mind how you can use APIs and randomization to generate your seed database, and you’ll be able to quickly and easily create data for testing your application.</p>]]></content><author><name></name></author><summary type="html"><![CDATA[In order to test and debug code running on a database, we need data in that database. Seeds are a way of creating temporary or filler data we can use as a simulation of real, user-created data. But how do we create good seed data? I’ll go over a few ideas from debugging that can help inform the seed data, then the basics of how to use an external API to fill in seed data for you.]]></summary></entry><entry><title type="html">Using Bootstrap with React</title><link href="http://localhost:4000/2022/05/10/using-bootstrap-with-react.html" rel="alternate" type="text/html" title="Using Bootstrap with React" /><published>2022-05-10T16:39:01-04:00</published><updated>2022-05-10T16:39:01-04:00</updated><id>http://localhost:4000/2022/05/10/using-bootstrap-with-react</id><content type="html" xml:base="http://localhost:4000/2022/05/10/using-bootstrap-with-react.html"><![CDATA[<p>Bootstrap is a toolkit combining Javascript, CSS, and other tools to create a quick and easy way to get a modern-looking website. Using vanilla Javascript and CSS, you can already access the full scope of Bootstrap’s functionality; however, for React there is also a react-bootstrap library available which recasts Bootstrap’s functionality in the form of React components. This blogpost will go through the differences in how vanilla and React Bootstrap are used, and some of the advantages React Bootstrap can offer in a React app.</p>

<h2 id="vanilla-bootstrap-example">Vanilla bootstrap example</h2>

<p>Vanilla bootstrap is made available via a CDN, a web resource your page can link to. It requires two steps in your HTML file to make the full functionality of bootstrap available; first, the CSS has to be loaded via a <link /> tag in the &lt;head&gt;:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">integrity=</span><span class="s">"sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span></code></pre></figure>

<p>Then, the Javascript has to be inserted via a <script> at the very end of the page:</script></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>With Bootstrap loaded, html elements can be given certain class names to take advantage of Bootstrap’s styling. Here’s an example of what some HTML using Bootstrap might look like:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"..."</span> <span class="na">class=</span><span class="s">"card-img-top"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-body"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"card-text"</span><span class="nt">&gt;</span>Text<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>That’s a whole lot of &lt;div&gt; tags, and though we know we’re using Bootstrap, the vague class names make it hard to know whether this styling is coming from Bootstrap or our own CSS. All this was possible with either completely vanilla Javascript, or within a React app; however, if we are using React, we have another option in react-bootstrap.</p>

<h2 id="react-bootstrap-example">React Bootstrap example</h2>

<p>To begin using react-bootstrap, it needs to be installed via npm with <code class="language-plaintext highlighter-rouge">npm install react-bootstrap</code>. Then, we can add two imports at the top of the component we would like to use Bootstrap within:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="dl">"</span><span class="s2">bootstrap/dist/css/bootstrap.min.css</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span><span class="p">,</span> <span class="nx">Row</span><span class="p">,</span> <span class="nx">Col</span><span class="p">,</span> <span class="nx">Card</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-bootstrap</span><span class="dl">"</span><span class="p">;</span></code></pre></figure>

<p>The first import imports the Bootstrap CSS, like we did from the CDN in the vanilla Javascript example. The second imports react-bootstrap’s React components that pre-package the functionality we accessed before via class names. Here’s the earlier HTML converted to React JSX, and using react-bootstrap components instead of classes:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;Container&gt;</span>
  <span class="nt">&lt;Row&gt;</span>
    <span class="nt">&lt;Col&gt;</span>
      <span class="nt">&lt;Card&gt;</span>
        <span class="nt">&lt;Card.Img</span> <span class="na">src=</span><span class="s">"..."</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;Card.Body&gt;</span>
          <span class="nt">&lt;Card.Text&gt;</span>Text<span class="nt">&lt;/Card.Text&gt;</span>
        <span class="nt">&lt;/Card.Body&gt;</span>
      <span class="nt">&lt;/Card&gt;</span>
    <span class="nt">&lt;/Col&gt;</span>
  <span class="nt">&lt;/Row&gt;</span>
<span class="nt">&lt;/Container&gt;</span></code></pre></figure>

<p>This has no functional difference from the vanilla Javascript example, but in my opinion it is much easier to read. Because every HTML node here is a React component that we have explicitly imported from react-bootstrap, there’s no ambiguity about where things are coming from; just look at the import statements if you’re not sure.</p>

<p>Another way react-bootstrap can make your code more clear than the vanilla Javascript alternative is through props. In vanilla Bootstrap, variants and optional parameters to a component are indicated through further class names:</p>

<p><code class="language-plaintext highlighter-rouge">&lt;div class="card bg-dark text-white"&gt;</code></p>

<p>This can be unclear for the same reasons the main component is unclear; not only are you not sure whether “bg-dark” is something coming from bootstrap or your own CSS, you also don’t know how it relates to the primary class “card”. (And some Bootstrap classes do actually change depending on where they’re applied!)</p>

<p>Here’s what that would look like with react-bootstrap:</p>

<p><code class="language-plaintext highlighter-rouge">&lt;Card className="bg-dark text-white"&gt;</code></p>

<p>Now at least it is clear that the most important thing about this component is that it is a Card, and the classes applied will depend on that basic framework.</p>]]></content><author><name></name></author><summary type="html"><![CDATA[Bootstrap is a toolkit combining Javascript, CSS, and other tools to create a quick and easy way to get a modern-looking website. Using vanilla Javascript and CSS, you can already access the full scope of Bootstrap’s functionality; however, for React there is also a react-bootstrap library available which recasts Bootstrap’s functionality in the form of React components. This blogpost will go through the differences in how vanilla and React Bootstrap are used, and some of the advantages React Bootstrap can offer in a React app.]]></summary></entry></feed>